var Color=function(a){"use strict";function b(a,b){var c,d={};for(c in a)a.hasOwnProperty(c)&&(d[c]=b?b(a[c]):a[c]);return d}function c(a){return a+a}function d(a,b){var c,d,e=b.split("");for(c in e)if(e.hasOwnProperty(c)&&(d=parseFloat(a[b[c]]),isNaN(d)||0>d||d>1))return 0;return 1}function e(a){for(var b,c,d="",e=0;4>e;e++)c=z(255*a[["r","g","b","a"][e]]),b=c.toString(16),16>c&&(b="0"+b),d+=b;return"#"+d}function f(a){for(var b=0,c={};4>b;b++)c[b]=parseInt("0x"+a.substring(2*b+1,2*b+3),16)/255;return{r:c[0],g:c[1],b:c[2],a:c[3]}}function g(b){var c,d,e=b.r,f=b.g,g=b.b,h=a.max(e,f,g),i=a.min(e,f,g),j=(h+i)/2;if(h===i)c=d=0;else{var k=h-i;switch(d=j>.5?k/(2-h-i):k/(h+i),h){case e:c=(f-g)/k+(g>f?6:0);break;case f:c=(g-e)/k+2;break;case g:c=(e-f)/k+4}c/=6}return{h:c,s:d,l:j,a:b.a}}function h(a){var b,c,d;if(0===a.s)b=c=d=a.l;else{var e,f=function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a};e=a.l<.5?a.l*(1+a.s):a.l+a.s-a.l*a.s;var g=2*a.l-e;b=f(g,e,a.h+1/3),c=f(g,e,a.h),d=f(g,e,a.h-1/3)}return{r:b,g:c,b:d,a:a.a}}function i(b){if(b.r===b.g&&b.g===b.b)return{c:0,m:0,y:0,k:1-b.r};var c=a.min(1-b.r,1-b.g,1-b.b);return{c:(1-b.r-c)/(1-c),m:(1-b.g-c)/(1-c),y:(1-b.b-c)/(1-c),k:c}}function j(b){return{r:1-a.min(1,b.c*(1-b.k)+b.k),g:1-a.min(1,b.m*(1-b.k)+b.k),b:1-a.min(1,b.y*(1-b.k)+b.k),a:1}}function k(a){for(var b=0;b<a.length;b++)a[b]=-1!==a[b].indexOf("%")?a[b].substr(0,a[b].length-1)/100:a[b]/255,a[b]>1&&(a[b]=1);return a}function l(a){var b;return/^#([0-9a-f]{3}){1,2}$/i.test(a)?(4===a.length&&(a=a.replace(/[0-9a-f]/gi,c)),b={r:f(a)},b.r.a=1):/^#([0-9a-f]{4}){1,2}$/i.test(a)&&(5===a.length&&(a=a.replace(/[0-9a-f]/gi,c)),b={r:f(a)}),b}function m(a){var b,c;return b=a.match(/^rgba\((\d+%?),(\d+%?),(\d+%?),(\.\d+|\d+\.?\d*)\)$/),b&&5===b.length?(b.shift(),c=b.pop()/1,c>1&&(c=1),b=k(b),{r:{r:b[0],g:b[1],b:b[2],a:c}}):void 0}function n(a){var b;return b=a.match(/^rgb\((\d+%?),(\d+%?),(\d+%?)\)$/),b&&4===b.length?(b.shift(),b=k(b),{r:{r:b[0],g:b[1],b:b[2],a:1}}):void 0}function o(b){var c,d,e;return c=b.match(/^hsla\((-?\d+),(\d+%),(\d+%),(\.\d+|\d+\.?\d*)\)$/),c&&5===c.length?(c.shift(),e=c.shift()/360,e-=a.floor(e),d=c.pop()/1,d>1&&(d=1),c=k(c),{h:{h:e,s:c[0],l:c[1],a:d}}):void 0}function p(b){var c,d;return c=b.match(/^hsl\((-?\d+),(\d+%),(\d+%)\)$/),c&&4===c.length?(c.shift(),d=c.shift()/360,d-=a.floor(d),c=k(c),{h:{h:d,s:c[0],l:c[1],a:1}}):void 0}function q(a){var b,c;if(b=a.match(/^device-cmyk\((\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*),(\.\d+|\d+\.?\d*)\)$/),b&&5===b.length){for(b.shift(),c=0;c<b.length;c++)b[c]=b[c]/1,b[c]>1&&(b[c]=1);return{r:j({c:b[0],m:b[1],y:b[2],k:b[3]})}}}function r(a){var b;return a=a.replace(/\s+/g,""),/^#/.test(a)?b=l(a):/^rgba/.test(a)?b=m(a):/^rgb/.test(a)?b=n(a):/^hsla/.test(a)?b=o(a):/^hsl/.test(a)?b=p(a):/^device-cmyk/.test(a)&&(b=q(a)),b}function s(c){var e,f;return c=b(c,parseFloat),d(c,"sl")&&!isNaN(c.h)?(c.h=c.h-a.floor(c.h),f={h:c},e=1,d(c,"a")&&(e=c.a),f.h.a=e):d(c,"rgb")?(f={r:c},e=1,d(c,"a")&&(e=c.a),f.r.a=e):d(c,"cmyk")&&(f={r:j(c)}),f}function t(a){var b;return"string"==typeof a?b=r(a):a instanceof y?b={r:a.getRgba(),h:a.getHsla()}:"object"==typeof a&&(b=s(a)),b}function u(a){return z(100*a)/100}function v(a){return[z(255*a.r),z(255*a.g),z(255*a.b),u(a.a)]}function w(a){return[z(360*a.h),z(100*a.s)+"%",z(100*a.l)+"%",u(a.a)]}function x(a){return[u(a.c),u(a.m),u(a.y),u(a.k)]}function y(a){var c=this,d={r:0,g:0,b:0,a:1},f={h:0,s:0,l:0,a:1};c.getRgba=function(){return b(d)},c.getRgb=function(){var a=b(d);return delete a.a,a},c.getHsla=function(){return b(f)},c.getHsl=function(){var a=b(f);return delete a.a,a},c.getCmyk=function(){return i(d)},c.getRgbaString=function(){return"rgba("+v(d).join()+")"},c.getRgbString=function(){var a=v(d);return a.pop(),"rgb("+a.join()+")"},c.getHexaString=function(){return e(d)},c.getHexString=function(){return e(d).substring(0,7)},c.getHslaString=function(){return"hsla("+w(f).join()+")"},c.getHslString=function(){var a=w(f);return a.pop(),"hsl("+a.join()+")"},c.getCmykString=function(){var a=x(i(d));return"device-cmyk("+a.join()+")"},c.getTextColor=function(){var a=.2126*d.r+.7152*d.g+.0722*d.b;return new y(.35>a?"#fff":"#000")},c.setColor=function(a){var b=t(a);return b&&(b.r&&b.h?(d=b.r,f=b.h):b.r?(d=b.r,f=g(b.r)):(d=h(b.h),f=b.h)),c},c.setAlpha=function(a){return a=parseFloat(a),!isNaN(a)&&a>=0&&1>=a&&(d.a=a,f.a=a),c},c.getAlpha=function(){return d.a},c.setColor(a)}var z=a.round;return y}(Math);